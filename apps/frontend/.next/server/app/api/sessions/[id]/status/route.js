(()=>{var e={};e.id=310,e.ids=[310],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1997:e=>{"use strict";e.exports=require("punycode")},7910:e=>{"use strict";e.exports=require("stream")},9551:e=>{"use strict";e.exports=require("url")},4075:e=>{"use strict";e.exports=require("zlib")},6279:(e,s,t)=>{"use strict";t.r(s),t.d(s,{patchFetch:()=>_,routeModule:()=>l,serverHooks:()=>v,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>R});var r={};t.r(r),t.d(r,{GET:()=>p,OPTIONS:()=>d});var o=t(9630),n=t(3623),i=t(7758),a=t(8335),u=t(9125);let c=process.env.NEXT_PUBLIC_ORCHESTRATOR_URL||process.env.ORCHESTRATOR_URL||"http://localhost:4000";async function p(e,{params:s}){try{let{id:e}=await s;if(!e)return a.NextResponse.json({error:"ID da sess\xe3o \xe9 obrigat\xf3rio"},{status:400});let{data:t,error:r}=await u.ND.from("whatsapp_sessions").select("*").eq("id",e).single();if(r||!t)return a.NextResponse.json({error:"Sess\xe3o n\xe3o encontrada"},{status:404});let o=await fetch(`${c}/evolution/instances/${encodeURIComponent(t.session_name)}/status`,{cache:"no-store"}),n=o.ok?await o.json():null,i=n?.status?.connected?"connected":t.is_active?"connected":"disconnected";return a.NextResponse.json({status:i,sessionId:t.id,sessionName:t.session_name,phoneNumber:t.phone_number,isActive:t.is_active,lastUpdate:t.updated_at})}catch(e){return console.error("Erro ao verificar status:",e),a.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function d(){return new a.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}let l=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/sessions/[id]/status/route",pathname:"/api/sessions/[id]/status",filename:"route",bundlePath:"app/api/sessions/[id]/status/route"},resolvedPagePath:"/Users/rafaelcarboni/Documents/ZAPNINJA/apps/frontend/src/app/api/sessions/[id]/status/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:x,workUnitAsyncStorage:R,serverHooks:v}=l;function _(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:R})}},5725:()=>{},989:()=>{},9125:(e,s,t)=>{"use strict";t.d(s,{ND:()=>i});var r=t(9552);process.env.NEXT_PUBLIC_ORCHESTRATOR_URL||process.env.ORCHESTRATOR_URL;let o=process.env.NEXT_PUBLIC_SUPABASE_URL,n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=o&&n?(0,r.UU)(o,n):null}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[24,548,552],()=>t(6279));module.exports=r})();